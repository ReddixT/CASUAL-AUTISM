
SOV_mrp = {

	SOV_surrender_fin = {
			
		available = {

		}

		allowed = {
			tag = SOV
		}
			
			
		fire_only_once = yes

		cost = 0

		visible = {
			FIN = { has_war_with = SOV }
		}
		
		
		complete_effect = {
			SOV = { white_peace = FIN }
			FIN = { white_peace = SOV }
			transfer_state = 146
			add_state_core = 146 
			transfer_state = 147
			add_state_core = 147
			}
	}
	
	SOV_prepare = {    

	available = { 
		has_manpower > 3316900 
		has_war = no 
		date < 1941.5.1
			POL = { has_capitulated = yes }
				}

				allowed = {
					tag = SOV
				}
				
				fire_only_once = yes

				cost = 0

				complete_effect = {	
				load_oob = "SOV_Belarus_Deployment"
				add_manpower = -1316900
				add_manpower = -2000000
			}
		}
	
	}
operations = {
	SOV_winter_1 = {
		icon = generic_army_support
		fire_only_once = yes
		visible = {
			has_war_with = GER
			original_tag = SOV
		}
		available = {
			date > 1941.9.30
			date < 1942.3.1
		}
		complete_effect = {	
			add_timed_idea = { idea = SOV_winter_1 days = 120 }
		}
	}
	SOV_winter_2 = {
		icon = generic_army_support
		fire_only_once = yes
		visible = {
			has_war_with = GER
			original_tag = SOV
		}
		available = {
			date > 1942.9.30
			date < 1943.3.1
		}
		complete_effect = {	
			add_timed_idea = { idea = SOV_winter_2 days = 120 }
		}
	}
	SOV_winter_1_operation = {
		visible = {
			has_idea = SOV_winter_1
			original_tag = SOV
		}
		allowed = {
			tag = SOV 
		}
		available = {
			NOT = {tag = SOV}
		}
		activation = {
			has_idea = SOV_winter_1
		}
		cancel_trigger = {
			NOT = { has_idea = SOV_winter_1 }
		}
		days_mission_timeout = 120
		fire_only_once = yes
		is_good = yes
		complete_effect = {
			swap_ideas = {
				add_idea = officers_purged_8
				remove_idea = officers_purged_7
			}
		}
	}
	SOV_winter_2_operation = {
		visible = {
			has_idea = SOV_winter_1
			original_tag = SOV
		}
		allowed = {
			tag = SOV 
		}
		available = {
			NOT = {tag = SOV}
		}
		activation = {
			has_idea = SOV_winter_1
		}
		cancel_trigger = {
			NOT = { has_idea = SOV_winter_1 }
		}
		days_mission_timeout = 120
		fire_only_once = yes
		is_good = yes
		complete_effect = {
				remove_ideas = officers_purged_8
				add_timed_idea = {
					idea = SOV_great_patriotic_war
					days = 150
				}	
		}
	}
}


SOV_great_patriotic_war = {

	SOV_order_227 = {

		icon = generic_army_support

		available = {
			has_war_with = GER
			surrender_progress > 0.15
		}

		cost = 50
		fire_only_once = yes

		days_remove = 720

		modifier = {
			army_core_defence_factor = 0.25
			mobilization_speed = 0.15
		}
	}


	#217 "Stalingrad"
	SOV_hold_stalingrad = {

		icon = generic_civil_support

		allowed = {
			original_tag = SOV
		}

		#Fail trigger
		available = {
			NOT = { controls_state = 217 }
		}

		days_mission_timeout = 180

		fire_only_once = yes

		is_good = yes

		activation = {
			has_war_with = GER
			217 = {
				is_controlled_by = SOV
				OR = {
					any_neighbor_state = {
						is_controlled_by = GER
						OWNER = { tag = SOV }
					}
					NOT = { is_fully_controlled_by = SOV }
				}
			}
		}

		#Success
		timeout_effect = {
			add_stability = 0.05
			add_war_support = 0.05
			217 = { save_event_target_as = state }			
			country_event = wtt_soviet_hold_city.1
		}
		#Fail
		complete_effect = {
			217 = { save_event_target_as = state }			
			country_event = wtt_soviet_hold_city.2
		}
	}
	
	#195 "Leningrad"
	SOV_hold_leningrad = {

		icon = generic_civil_support

		allowed = {
			original_tag = SOV
		}

		#Fail trigger
		available = {
			NOT = { controls_state = 195 }
		}

		days_mission_timeout = 180

		fire_only_once = yes

		is_good = yes

		activation = {
			has_war_with = GER
			195 = {
				is_controlled_by = SOV
				OR = {
					any_neighbor_state = {
						is_controlled_by = GER
						OWNER = { tag = SOV }
					}
					NOT = { is_fully_controlled_by = SOV }
				}
			}
		}

		#Success
		timeout_effect = {
			add_stability = 0.05
			add_war_support = 0.05
			195 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.3
		}
		#Fail
		complete_effect = {
			195 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.4
		}
	}

	#219 "Moscow"
	SOV_hold_moscow = {

		icon = generic_civil_support

		allowed = {
			original_tag = SOV
		}

		#Fail trigger
		available = {
			NOT = { controls_state = 219 }
		}

		days_mission_timeout = 180

		fire_only_once = yes

		is_good = yes

		activation = {
			has_war_with = GER
			219 = {
				is_controlled_by = SOV
				OR = {
					any_neighbor_state = {
						is_controlled_by = GER
						OWNER = { tag = SOV }
					}
					NOT = { is_fully_controlled_by = SOV }
				}
			}
		}

		#Success
		timeout_effect = {
			add_stability = 0.05
			add_war_support = 0.05
			219 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.5
		}
		#Fail
		complete_effect = {
			219 = { save_event_target_as = state }
			country_event = wtt_soviet_hold_city.6
		}
	}
}